# 环境搭建

## 前提条件

1. 要启动服务器，请安装.NET 6 SDK或.NET 6
   Runtime。您可以通过官方网站进行此操作：[https://dotnet.microsoft.com/download](https://dotnet.microsoft.com/zh-cn/download)。
2. 安装MongoDB最新的LTS版本。自从3.6版本起，Open Cloud Server支持与MongoDB一起工作。

!!! MongoDB安装

    - 对于Windows，您可以使用此安装程序：[https://www.mongodb.com/try/download/community](https://www.mongodb.com/try/download/community)
    - 要在Linux上安装它，请使用以下说明：[https://docs.mongodb.com/manual/administration/install-on-linux/](https://docs.mongodb.com/manual/administration/install-on-linux/)

## windows中手动安装

- 下载并解压`OpenCloudServer_24.10.zip`
- 在配置文件./appsettings.json中指定服务器设置。

``` json
{
  "OdWebSettings": {
    "DatabaseUrl": "mongodb://localhost:27017", // MongoDB服务器的URL，如果它安装在另一个服务器实例上，请更改它
    "StoragePath": "E:\\OpenCloud24.10\\OpenCloudServer_24.10\\data\\", // 将用于存储用户文件的文件夹路径
    "RegistrationToken": "df1dceb8e2d6f6b0894363b085801e36" // JobRunner的Token
  }
}
```

- 确保MongoDB服务正在运行。
- 启动服务：`dotnet OpenCloudServer.dll --urls http://127.0.0.1:8088`
- 访问 `http://127.0.0.1:8088/version` 确认服务是否成功启动

下面安装JobRunner：

- 下载并解压`WebTools_vc16_amd64dll_24.10.zip`
- 将`JobRunner_24.10.win.zip`解压到`WebTools目录`的`/exe/vc16_amd64dll`目录中。（❗不同版本目录名称不一样）。

<figure markdown="span">
  ![](https://cdn.jsdelivr.net/gh/luguosong/images@master/blog-img/202405071727303.png){ loading=lazy }
  <figcaption>解压JobRunner到WebTools</figcaption>
</figure>

- 解压`Kernel_vc16_amd64dll_24.10.zip`、`Drawings_vc16_amd64dll_24.10.zip`、`Visualize_vc16_amd64dll_24.10.zip`、`Publish_vc16_amd64dll_24.10.zip`、`IFC_vc16_amd64dll_24.10.zip`中的exe目录到WebTools目录。

!!! warning
    
    这里只需要解压其中的exe目录，其它目录不需要解压

<figure markdown="span">
  ![](https://cdn.jsdelivr.net/gh/luguosong/images@master/blog-img/202405071732575.png){ loading=lazy }
  <figcaption>解压Kernel压缩包中的exe目录到WebTools目录</figcaption>
</figure>

!!! note

    您可以选择下载`BimRv`和`BimNv`来支持.rvt和.nwc文件格式，这需要额外订阅这些SIG项目。

- 控制台打开WebTools目录下的`exe\vc16_amd64dll`，linux中是`bin目录`,不同版本的路径不一样。
- 输入以下命令启动JobRunner：

```shell
JobRunner --token=df1dceb8e2d6f6b0894363b085801e36 --host=127.0.0.1 --port=8088 --name=basic_runner --waitTimeOut=10000 --rootUrl=/ --cachePath=E:\OpenCloud24.10\cache
```

## 问题汇总

### objectTree参数报错


